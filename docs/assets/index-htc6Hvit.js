(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();const h="ws://172.31.177.108:8000/lightctl",l=new WebSocket(h);class r{constructor(t,e){this.x=t,this.y=e}}class d{constructor(t,e,o){this.radius=t,this.velocity=new r(3,1),this.width=e,this.height=o,this.position=new r(e/2,o/2),this.colors=["blue","black","lightblue","white"],this.colors_index=0}update(){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.x-this.radius<=0&&(this.velocity.x*=-1),this.position.y-this.radius<=0&&(this.velocity.y*=-1),this.position.x+this.radius>=this.width&&(this.velocity.x*=-1),this.position.y+this.radius>=this.height&&(this.velocity.y*=-1)}draw(t){this.update(),t.beginPath(),t.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),t.fillStyle=this.colors[this.colors_index++],this.colors_index==this.colors.length&&(this.colors_index=0),t.fill(),t.stroke()}}class a{constructor(t,e){this.width=t,this.height=e,this.position=new r(0,e)}update(){this.position.x++,this.position.x>=this.width&&(this.position.x=0)}draw(t){this.update(),t.moveTo(this.width/2,0),t.lineTo(this.position.x,this.position.y),t.stroke()}}const u=()=>{const n=document.getElementById("canvas"),t=n.getContext("2d"),e=n.width,o=n.height,i=new a(e,o),s=new d(50,e,o);setInterval(()=>{t.clearRect(0,0,e,o),i.draw(t),s.draw(t)},1)},f=n=>{for(let t of Array(n).keys()){t++;const e=document.createElement("input");e.setAttribute("type","checkbox"),e.setAttribute("id",`checkbox_${t}`);const o=document.getElementById("main");if(o===null)return;o.appendChild(e),e.onclick=()=>{console.log("let there be light!!!");const i=JSON.stringify({id:t,action:e.checked});l.send(i)}}};l.onmessage=n=>{const t=n.data,e=JSON.parse(t);if(console.log(e),"count"in e)console.log(`count is: ${e.count}`),f(e.count);else{const o=e.id,i=e.state,s=document.getElementById(`checkbox_${o}`);s.checked=i}};window.addEventListener("DOMContentLoaded",()=>{u()},!1);
